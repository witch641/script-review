(()=>{"use strict";var e={6759:(e,t,r)=>{r(3792),r(3362),r(9085),r(9391);var a=r(3751),o=r(641),n={id:"app",class:"app-container"};function i(e,t,r,i,s,u){var d=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.bF)(d,null,{default:(0,o.k6)((function(e){var t=e.Component;return[(0,o.bF)(a.eB,{name:"page",mode:"out-in"},{default:(0,o.k6)((function(){return[((0,o.uX)(),(0,o.Wv)((0,o.$y)(t)))]})),_:2},1024)]})),_:1})])}const s={name:"App"};var u=r(6262);const d=(0,u.A)(s,[["render",i]]),l=d;var c=r(5220),m={class:"home"},p={class:"actions"};function f(e,t,r,n,i,s){var u=(0,o.g2)("SearchBar"),d=(0,o.g2)("AddRecordForm"),l=(0,o.g2)("GameRecord");return(0,o.uX)(),(0,o.CE)("div",m,[t[3]||(t[3]=(0,o.Lk)("div",{class:"title-container"},[(0,o.Lk)("h1",{class:"title"},"剧本杀复盘记录"),(0,o.Lk)("div",{class:"title-decoration"})],-1)),(0,o.bF)(a.eB,{name:"fade"},{default:(0,o.k6)((function(){return[(0,o.bF)(u,{onSearch:s.handleSearch,class:"search-section"},null,8,["onSearch"])]})),_:1}),(0,o.Lk)("div",p,[(0,o.Lk)("button",{class:"add-btn",onClick:t[0]||(t[0]=function(e){return i.showAddForm=!0})},t[2]||(t[2]=[(0,o.Lk)("span",{class:"btn-icon"},"+",-1),(0,o.Lk)("span",{class:"btn-text"},"添加记录",-1)]))]),(0,o.bF)(a.eB,{name:"fade"},{default:(0,o.k6)((function(){return[i.showAddForm?((0,o.uX)(),(0,o.Wv)(d,{key:0,onClose:t[1]||(t[1]=function(e){return i.showAddForm=!1})})):(0,o.Q3)("",!0)]})),_:1}),(0,o.bF)(a.F,{name:"slide-up",tag:"div",class:"records-list"},{default:(0,o.k6)((function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.filteredRecords,(function(e){return(0,o.uX)(),(0,o.Wv)(l,{key:e.id,record:e,onDelete:s.deleteRecord},null,8,["record","onDelete"])})),128))]})),_:1})])}var g=r(8788),h=r(6278),v={class:"search-container"};function k(e,t,r,n,i,s){return(0,o.uX)(),(0,o.CE)("div",v,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.searchQuery=e}),onInput:t[1]||(t[1]=function(){return s.handleSearch&&s.handleSearch.apply(s,arguments)}),placeholder:"搜索记录...",class:"search-input"},null,544),[[a.Jo,i.searchQuery]])])}r(6031);const y={name:"SearchBar",data:function(){return{searchQuery:"",debounceTimer:null}},methods:{handleSearch:function(){var e=this;this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){e.$emit("search",e.searchQuery)}),300)}},beforeUnmount:function(){this.debounceTimer&&clearTimeout(this.debounceTimer)}},b=(0,u.A)(y,[["render",k],["__scopeId","data-v-342b4304"]]),L=b;var D=r(33),S={class:"record-card"},R={class:"record-header"},F={class:"game-name"},T={class:"record-field"},w={class:"record-field"},C={class:"record-field"},_={class:"record-field"},A={class:"multiline-text"},I={class:"record-field"},N={class:"multiline-text"},E={class:"record-actions"};function O(e,t,r,a,n,i){return(0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("div",R,[(0,o.Lk)("h3",F,(0,D.v_)(r.record.gameName||"未命名游戏"),1),(0,o.Lk)("span",{class:(0,D.C4)(["mood-tag",i.moodClass])},(0,D.v_)(r.record.mood||"心情无"),3)]),(0,o.Lk)("div",T,[t[2]||(t[2]=(0,o.Lk)("span",{class:"field-label"},"游戏时间：",-1)),(0,o.Lk)("span",null,(0,D.v_)(i.formattedGameTime),1)]),(0,o.Lk)("div",w,[t[3]||(t[3]=(0,o.Lk)("span",{class:"field-label"},"玩家人数：",-1)),(0,o.Lk)("span",null,(0,D.v_)(r.record.players||"无"),1)]),(0,o.Lk)("div",C,[t[4]||(t[4]=(0,o.Lk)("span",{class:"field-label"},"参与者：",-1)),(0,o.Lk)("span",null,(0,D.v_)(r.record.participants||"无"),1)]),(0,o.Lk)("div",_,[t[5]||(t[5]=(0,o.Lk)("span",{class:"field-label"},"关键线索：",-1)),(0,o.Lk)("p",A,(0,D.v_)(r.record.keyPoints||"无"),1)]),(0,o.Lk)("div",I,[t[6]||(t[6]=(0,o.Lk)("span",{class:"field-label"},"复盘总结：",-1)),(0,o.Lk)("p",N,(0,D.v_)(r.record.summary||"无"),1)]),(0,o.Lk)("div",E,[(0,o.Lk)("button",{class:"edit-btn",onClick:t[0]||(t[0]=function(){return i.handleEdit&&i.handleEdit.apply(i,arguments)})},"编辑"),(0,o.Lk)("button",{class:"delete-btn",onClick:t[1]||(t[1]=function(t){return e.$emit("delete",r.record.id)})},"删除")])])}r(4114),r(3288);const $={name:"GameRecord",props:{record:{type:Object,required:!0}},computed:{formattedGameTime:function(){if(!this.record.gameTime)return"无时间";try{var e=new Date(this.record.gameTime);return isNaN(e.getTime())?"无时间":e.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}catch(t){return console.error("Date formatting error:",t),"无时间"}},moodClass:function(){var e={开心:"mood-happy",紧张:"mood-nervous",沮丧:"mood-sad",如坐针毡:"mood-anxious",收获颇丰:"mood-fulfilled"};return e[this.record.mood]||"mood-default"}},methods:{handleEdit:function(){this.$router.push("/edit/".concat(this.record.id))}}},x=(0,u.A)($,[["render",O],["__scopeId","data-v-2ceed332"]]),P=x;var J={class:"form-overlay"},U={class:"form-container"},V={class:"form-group"},X={class:"form-group"},Q={class:"form-group"},j={class:"form-group"},q={class:"form-group"},B={class:"form-group"},G={class:"form-group"},W={class:"form-actions"},H={type:"submit",class:"submit-btn"};function M(e,t,r,n,i,s){return(0,o.uX)(),(0,o.CE)("div",J,[(0,o.Lk)("div",U,[(0,o.Lk)("h2",null,(0,D.v_)(s.isEditing?"编辑记录":"添加记录"),1),(0,o.Lk)("form",{onSubmit:t[8]||(t[8]=(0,a.D$)((function(){return s.submitForm&&s.submitForm.apply(s,arguments)}),["prevent"]))},[(0,o.Lk)("div",V,[t[9]||(t[9]=(0,o.Lk)("label",null,"游戏名称：",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.form.gameName=e}),required:""},null,512),[[a.Jo,i.form.gameName]])]),(0,o.Lk)("div",X,[t[10]||(t[10]=(0,o.Lk)("label",null,"游戏时间：",-1)),(0,o.bo)((0,o.Lk)("input",{type:"datetime-local","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.form.gameTime=e}),required:""},null,512),[[a.Jo,i.form.gameTime]])]),(0,o.Lk)("div",Q,[t[12]||(t[12]=(0,o.Lk)("label",null,"心情：",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.form.mood=e}),required:""},t[11]||(t[11]=[(0,o.Fv)('<option value="" data-v-5c4dad97>请选择心情</option><option value="开心" data-v-5c4dad97>开心</option><option value="收获颇丰" data-v-5c4dad97>收获颇丰</option><option value="紧张" data-v-5c4dad97>紧张</option><option value="如坐针毡" data-v-5c4dad97>如坐针毡</option><option value="沮丧" data-v-5c4dad97>沮丧</option>',6)]),512),[[a.u1,i.form.mood]])]),(0,o.Lk)("div",j,[t[13]||(t[13]=(0,o.Lk)("label",null,"玩家人数：",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=function(e){return i.form.players=e}),required:"",min:"1"},null,512),[[a.Jo,i.form.players,void 0,{number:!0}]])]),(0,o.Lk)("div",q,[t[14]||(t[14]=(0,o.Lk)("label",null,"参与者姓名：",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=function(e){return i.form.participants=e}),placeholder:"请用逗号分隔多个参与者"},null,512),[[a.Jo,i.form.participants]])]),(0,o.Lk)("div",B,[t[15]||(t[15]=(0,o.Lk)("label",null,"关键线索：",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.form.keyPoints=e}),rows:"4"},null,512),[[a.Jo,i.form.keyPoints]])]),(0,o.Lk)("div",G,[t[16]||(t[16]=(0,o.Lk)("label",null,"复盘总结：",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.form.summary=e}),rows:"6"},null,512),[[a.Jo,i.form.summary]])]),(0,o.Lk)("div",W,[(0,o.Lk)("button",H,(0,D.v_)((s.isEditing,"保存修改")),1),(0,o.Lk)("button",{type:"button",class:"cancel-btn",onClick:t[7]||(t[7]=function(t){return e.$emit("close")})},"取消")])],32)])])}r(4782),r(1688);const z={name:"AddRecordForm",props:{editRecord:{type:Object,default:null}},data:function(){return{form:{gameName:"",gameTime:this.formatDateForInput(new Date),mood:"",players:"",participants:"",keyPoints:"",summary:""}}},computed:{isEditing:function(){return!!this.editRecord}},methods:{formatDateForInput:function(e){return new Date(e).toISOString().slice(0,16)},submitForm:function(){var e=(0,g.A)((0,g.A)({},this.form),{},{gameTime:new Date(this.form.gameTime).toISOString()});this.isEditing?this.$store.commit("updateRecord",(0,g.A)({id:this.editRecord.id},e)):this.$store.commit("addRecord",e),this.$emit("close"),this.resetForm()},resetForm:function(){this.form={gameName:"",gameTime:this.formatDateForInput(new Date),mood:"",players:"",participants:"",keyPoints:"",summary:""}}},created:function(){this.editRecord&&(this.form=(0,g.A)((0,g.A)({},this.editRecord),{},{gameTime:this.formatDateForInput(new Date(this.editRecord.gameTime))}))}},K=(0,u.A)(z,[["render",M],["__scopeId","data-v-5c4dad97"]]),Y=K,Z={name:"HomePage",components:{SearchBar:L,GameRecord:P,AddRecordForm:Y},data:function(){return{showAddForm:!1}},computed:(0,g.A)({},(0,h.L8)(["filteredRecords"])),methods:{handleSearch:function(e){this.$store.commit("setSearchQuery",e)},deleteRecord:function(e){this.$store.commit("deleteRecord",e)}}},ee=(0,u.A)(Z,[["render",f],["__scopeId","data-v-7b73f7f5"]]),te=ee;var re={class:"add-game"};function ae(e,t,r,a,n,i){var s=(0,o.g2)("GameForm");return(0,o.uX)(),(0,o.CE)("div",re,[(0,o.Lk)("h2",null,(0,D.v_)(n.isEditing?"编辑记录":"添加记录"),1),n.formReady?((0,o.uX)(),(0,o.Wv)(s,{key:0,onSubmit:i.handleSubmit,initialData:n.editingRecord},null,8,["onSubmit","initialData"])):(0,o.Q3)("",!0)])}var oe={class:"game-form"},ne={class:"form-group"},ie={class:"form-group"},se={class:"form-group"},ue={class:"form-group"},de={class:"form-group"},le={class:"form-group"},ce={class:"form-group"},me={type:"submit"};function pe(e,t,r,n,i,s){return(0,o.uX)(),(0,o.CE)("div",oe,[(0,o.Lk)("form",{onSubmit:t[7]||(t[7]=(0,a.D$)((function(){return s.submitForm&&s.submitForm.apply(s,arguments)}),["prevent"]))},[(0,o.Lk)("div",ne,[t[8]||(t[8]=(0,o.Lk)("label",null,"游戏名称",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.gameData.gameName=e}),required:""},null,512),[[a.Jo,i.gameData.gameName]])]),(0,o.Lk)("div",ie,[t[10]||(t[10]=(0,o.Lk)("label",null,"心情",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.gameData.mood=e})},t[9]||(t[9]=[(0,o.Lk)("option",null,"开心",-1),(0,o.Lk)("option",null,"紧张",-1),(0,o.Lk)("option",null,"沮丧",-1),(0,o.Lk)("option",null,"如坐针毡",-1),(0,o.Lk)("option",null,"收获颇丰",-1)]),512),[[a.u1,i.gameData.mood]])]),(0,o.Lk)("div",se,[t[11]||(t[11]=(0,o.Lk)("label",null,"游戏时间",-1)),(0,o.bo)((0,o.Lk)("input",{type:"datetime-local","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.gameData.gameTime=e}),required:""},null,512),[[a.Jo,i.gameData.gameTime]])]),(0,o.Lk)("div",ue,[t[12]||(t[12]=(0,o.Lk)("label",null,"玩家人数",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=function(e){return i.gameData.playerCount=e}),required:""},null,512),[[a.Jo,i.gameData.playerCount]])]),(0,o.Lk)("div",de,[t[13]||(t[13]=(0,o.Lk)("label",null,"参与者姓名",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.gameData.players=e}),placeholder:"用逗号分隔玩家姓名"},null,512),[[a.Jo,i.gameData.players]])]),(0,o.Lk)("div",le,[t[14]||(t[14]=(0,o.Lk)("label",null,"关键线索",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.gameData.keyPoints=e}),rows:"4"},null,512),[[a.Jo,i.gameData.keyPoints]])]),(0,o.Lk)("div",ce,[t[15]||(t[15]=(0,o.Lk)("label",null,"复盘总结",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.gameData.summary=e}),rows:"4"},null,512),[[a.Jo,i.gameData.summary]])]),(0,o.Lk)("button",me,(0,D.v_)(e.isEditing?"保存修改":"保存"),1)],32)])}r(8706),r(2892),r(8156);const fe={props:{initialData:{type:Object,default:function(){return null}}},data:function(){return{gameData:{gameName:"",mood:"开心",gameTime:this.formatDateForInput(new Date),playerCount:0,players:"",keyPoints:"",summary:""}}},created:function(){this.initialData&&(this.gameData={gameName:this.initialData.gameName||"",mood:this.initialData.mood||"开心",gameTime:this.formatDateForInput(new Date(this.initialData.gameTime)),playerCount:Number(this.initialData.playerCount)||0,players:this.initialData.players||"",keyPoints:this.initialData.keyPoints||"",summary:this.initialData.summary||""})},watch:{initialData:{handler:function(e){e&&(this.gameData={gameName:e.gameName||"",mood:e.mood||"开心",gameTime:this.formatDateForInput(new Date(e.gameTime)),playerCount:Number(e.playerCount)||0,players:e.players||"",keyPoints:e.keyPoints||"",summary:e.summary||""})},deep:!0}},methods:{formatDateForInput:function(e){if(!e||isNaN(e.getTime()))return"";var t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(a,"T").concat(o,":").concat(n)},submitForm:function(){var e=(0,g.A)((0,g.A)({},this.gameData),{},{playerCount:Number(this.gameData.playerCount),gameTime:new Date(this.gameData.gameTime).toISOString()});this.$emit("submit",e)}}},ge=(0,u.A)(fe,[["render",pe],["__scopeId","data-v-125d7a0f"]]),he=ge,ve={components:{GameForm:he},data:function(){return{editingRecord:null,isEditing:!1,formReady:!1}},created:function(){var e=this.$route.params.id;!e||(this.isEditing=!0,this.editingRecord=this.$store.getters.getRecordById(e),this.editingRecord)?this.formReady=!0:this.$router.push("/")},methods:{handleSubmit:function(e){this.isEditing?this.$store.dispatch("updateRecord",(0,g.A)((0,g.A)({},e),{},{id:this.$route.params.id})):this.$store.commit("addRecord",e),this.$router.push("/")}}},ke=(0,u.A)(ve,[["render",ae],["__scopeId","data-v-0a7b49a4"]]),ye=ke;var be=[{path:"/",name:"home",component:te},{path:"/edit/:id",name:"edit",component:ye}],Le=(0,c.aE)({history:(0,c.LA)("/script-review/"),routes:be});const De=Le;r(6918),r(2008),r(113),r(8980),r(4423),r(2062),r(5086),r(4554),r(9089),r(739),r(3110),r(9432),r(6099),r(8781),r(1699),r(8992),r(4520),r(2577),r(1454),r(7550);var Se=localStorage.getItem("gameRecords"),Re=Se?JSON.parse(Se):[];const Fe=(0,h.y$)({state:{records:Re,searchQuery:""},getters:{filteredRecords:function(e){var t,r=(null===(t=e.searchQuery)||void 0===t?void 0:t.toLowerCase())||"";return r?e.records.filter((function(e){var t=[String(e.gameName||""),String(e.mood||""),String(e.players||""),String(e.participants||""),String(e.keyPoints||""),String(e.summary||"")].map((function(e){return e.toLowerCase()}));return t.some((function(e){return e.includes(r)}))})):e.records},getRecordById:function(e){return function(t){return e.records.find((function(e){return String(e.id)===String(t)}))||null}}},mutations:{setSearchQuery:function(e,t){e.searchQuery=t||""},addRecord:function(e,t){var r=(0,g.A)({id:Date.now().toString(),gameTime:(new Date).toISOString(),gameName:t.gameName||"",mood:t.mood||"",playerCount:t.playerCount||0,players:t.players||"",keyPoints:t.keyPoints||"",summary:t.summary||""},t);e.records.push(r),localStorage.setItem("gameRecords",JSON.stringify(e.records))},deleteRecord:function(e,t){var r=e.records.findIndex((function(e){return e.id===t}));-1!==r&&(e.records.splice(r,1),localStorage.setItem("gameRecords",JSON.stringify(e.records)))},updateRecord:function(e,t){var r=e.records.findIndex((function(e){return e.id===t.id}));-1!==r&&(e.records[r]=(0,g.A)((0,g.A)({},e.records[r]),t),localStorage.setItem("gameRecords",JSON.stringify(e.records)))}},actions:{updateRecord:function(e,t){var r=e.commit;r("updateRecord",t)}}});var Te=(0,a.Ef)(l);Te.use(Fe),Te.use(De),Te.mount("#app")}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,r),n.exports}r.m=e,(()=>{var e=[];r.O=(t,a,o,n)=>{if(!a){var i=1/0;for(l=0;l<e.length;l++){for(var[a,o,n]=e[l],s=!0,u=0;u<a.length;u++)(!1&n||i>=n)&&Object.keys(r.O).every((e=>r.O[e](a[u])))?a.splice(u--,1):(s=!1,n<i&&(i=n));if(s){e.splice(l--,1);var d=o();void 0!==d&&(t=d)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[a,o,n]}})(),(()=>{r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var o,n,[i,s,u]=a,d=0;if(i.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(u)var l=u(r)}for(t&&t(a);d<i.length;d++)n=i[d],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(l)},a=self["webpackChunkscript_review"]=self["webpackChunkscript_review"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=r.O(void 0,[504],(()=>r(6759)));a=r.O(a)})();
//# sourceMappingURL=app.0ddfc03b.js.map